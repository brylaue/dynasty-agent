<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Dynasty Agent • App</title>
	<link rel="stylesheet" href="/static/style.css" />
</head>
<body>
	<header class="topbar">
		<div class="brand">Dynasty Agent</div>
		<div class="spacer"></div>
		<div class="backend-override" style="gap:6px;">
			<input id="league-id" type="text" placeholder="League ID" />
			<button id="save-league" type="button" class="btn btn-secondary">Set</button>
			<input id="backend-base" type="url" placeholder="https://dynasty-agent-backend.onrender.com" />
			<button id="save-backend" type="button" class="btn btn-secondary">Use</button>
		</div>
	</header>

	<nav class="tabs">
		<button class="tab active" data-tab="chat">Chat</button>
		<button class="tab" data-tab="rosters">Rosters</button>
		<button class="tab" data-tab="projections">Projections</button>
		<button class="tab" data-tab="news">News</button>
		<button class="tab" data-tab="trades">Trade Calculator</button>
	</nav>

	<main class="page">
		<section class="tab-panel show" data-tab="chat">
			<div id="messages" class="messages"></div>
			<form id="ask-form" class="composer">
				<input id="question" name="question" type="text" placeholder="Ask about trades, start/sit, waivers..." autocomplete="off" required />
				<button type="submit" class="btn btn-primary">Ask</button>
			</form>
		</section>

		<section class="tab-panel" data-tab="rosters">
			<div class="toolbar">
				<button id="open-rosters" type="button" class="btn btn-primary">View Rosters</button>
				<a class="link" href="/api/health" target="_blank">API health</a>
			</div>
			<div class="meta">Open the roster drawer to browse teams and players.</div>
		</section>

		<section class="tab-panel" data-tab="projections">
			<div class="toolbar">
				<button id="load-proj" type="button" class="btn btn-primary">Load Projections</button>
			</div>
			<div id="proj-list" class="roster-grid"></div>
		</section>

		<section class="tab-panel" data-tab="news">
			<div class="toolbar">
				<button id="load-news" type="button" class="btn btn-primary">Load News</button>
			</div>
			<div id="news-list" class="messages"></div>
		</section>

		<section class="tab-panel" data-tab="trades">
			<div class="trade-grid">
				<div class="trade-col">
					<h3>Team A</h3>
					<input id="trade-a-search" type="text" placeholder="Search players..." />
					<div id="trade-a-suggest" class="suggest"></div>
					<div id="trade-a-list" class="trade-list"></div>
				</div>
				<div class="trade-col">
					<h3>Team B</h3>
					<input id="trade-b-search" type="text" placeholder="Search players..." />
					<div id="trade-b-suggest" class="suggest"></div>
					<div id="trade-b-list" class="trade-list"></div>
				</div>
			</div>
			<div style="margin-top:10px;">
				<button id="trade-eval" class="btn btn-primary">Evaluate Trade</button>
				<div id="trade-result" class="messages" style="margin-top:10px;"></div>
			</div>
		</section>
	</main>

	<div id="drawer-overlay" class="overlay hidden"></div>
	<aside id="drawer" class="drawer hidden">
		<div class="drawer-header">
			<div class="title">Rosters</div>
			<button id="close-drawer" class="btn btn-secondary">Close</button>
		</div>
		<div class="drawer-body">
			<div class="my-team" style="margin-bottom:8px;">
				<label for="owner-select">My Team</label>
				<select id="owner-select"></select>
				<button id="save-team" type="button" class="btn btn-secondary">Save</button>
			</div>
			<div id="roster-list" class="roster-grid"></div>
		</div>
	</aside>

	<footer class="footer">
		<small>Powered by Sleeper + LangGraph • <span id="status-text"></span></small>
	</footer>

	<script src="/static/app.js"></script>
</body>
</html>